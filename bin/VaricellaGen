#!/usr/bin/env bash

# create the required directories
mkdir -p $output/results
mkdir -p $output/results/{qc,alignment,variants,consensus,clade,assembly}

# Check if the files exist
exist_p() {
	if [ -e "$forward_read" ] && [ -s "$forward_read" ] && [ -e "$reverse_read" ] && [ -s "$reverse_read" ]
	then
    		echo -e "Both reads exist and are not empty.\n We shall proceed to the down stream analysis"
	else
    		echo "One or reads do not exist or are empty."
	fi
}

# Function to perform quality assessment on paired-end files
run_fastqc_p() {
	# Output directory for FastQC results
    	output_dir="$output/results/qc"
	mkdir -p $output_dir/{before,after}
	fastqc $forward_read $reverse_read -o $output_dir/before/
	multiqc $output_dir/before/* -o $output_dir/before/
	trim_galore -q 28 --fastqc --paired $forward $reverse
#	mv ${i}*fastqc.zip $output_dir/after/
	echo "Quality assessment complete. Results are saved in the '$output_dir' directory."
}

